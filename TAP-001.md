# TAP-001: Identifying Alarms Using TL1

## Purpose
This procedure guides you through identifying and analyzing alarms on the Alcatel 1603 SM/SMX using TL1 commands.

## Severity Levels

| Level | Code | Description | Action Required |
|-------|------|-------------|-----------------|
| Critical | CR | Service affecting | Immediate action |
| Major | MJ | Degraded service | Urgent attention |
| Minor | MN | Potential issue | Schedule maintenance |
| Warning | WN | Informational | Monitor |

## Procedure Steps

### Step 1: Retrieve All Active Alarms

**Command:**
```
RTRV-ALM-ALL:::1::;
```

**What this does:**
- Retrieves all active alarms from the equipment
- Shows alarm severity, type, and location
- Provides timestamp of alarm occurrence

**Expected Response:**
```
   SITE01 2025-10-07 12:30:45
M  1 COMPLD
   "DG1-OC12-1:CR,LOS,SA,10-07,12:30:45"
   "DG1-T1-5:MJ,AIS,NSA,10-07,12:31:10"
;
```

### Step 2: Analyze Alarm Information

**Alarm Format:** `{AID}:{SEVERITY},{TYPE},{SERVICE_AFFECT},{DATE},{TIME}`

**Components:**
- **AID**: Which circuit/equipment (e.g., DG1-OC12-1)
- **SEVERITY**: CR, MJ, MN, or WN
- **TYPE**: Alarm type (LOS, AIS, RFI, etc.)
- **SERVICE_AFFECT**: SA (service affecting) or NSA (non-service affecting)
- **DATE/TIME**: When the alarm occurred

### Step 3: Retrieve Detailed Conditions

For specific circuits with alarms, get detailed condition information:

**Command:**
```
RTRV-COND-OC12:::2::;
```

**What this does:**
- Shows all conditions affecting OC12 circuits
- Provides more detailed diagnostic information
- Helps identify root cause

### Step 4: Common Alarm Types

#### Loss of Signal (LOS)
**Meaning:** No signal detected on the facility
**Possible Causes:**
- Fiber disconnected or broken
- Upstream equipment powered off
- Laser failure

**TL1 Commands to Use:**
```
RTRV-COND-OC12::{AID}:3::;     # Check OC12 conditions
RTRV-EQPT::{AID}:4::;          # Check equipment status
```

#### Alarm Indication Signal (AIS)
**Meaning:** Upstream equipment is sending alarm signal
**Possible Causes:**
- Problem upstream in the network
- Far-end equipment failure
- Path issue

**TL1 Commands to Use:**
```
RTRV-COND-T1::{AID}:5::;       # Check T1 conditions
RTRV-ALM-ALL:::6::;             # Check all alarms for patterns
```

#### Remote Failure Indication (RFI)
**Meaning:** Far end is receiving bad signal from us
**Possible Causes:**
- Local transmit laser issue
- Fiber problems affecting outbound path
- Local equipment malfunction

**TL1 Commands to Use:**
```
RTRV-COND-OC12::{AID}:7::;     # Check outbound conditions
RTRV-PM-OC12::{AID}:8::;       # Check performance metrics
```

### Step 5: Check Historical Alarms

To see alarm history (cleared alarms):

**Command:**
```
RTRV-ALM-ALL:::9::MONTYPE=CLEARED;
```

**Use Case:**
- Troubleshooting intermittent issues
- Identifying patterns
- Post-incident analysis

### Step 6: Targeted Alarm Queries

**By Severity:**
```
RTRV-ALM-ALL:::10::NTFCNCDE=CR;      # Critical only
RTRV-ALM-ALL:::11::NTFCNCDE=MJ;      # Major only
```

**By Circuit Type:**
```
RTRV-ALM-T1:::12::;                   # T1 alarms only
RTRV-ALM-OC12:::13::;                 # OC12 alarms only
RTRV-ALM-DS3:::14::;                  # DS3 alarms only
```

**By Specific Circuit:**
```
RTRV-ALM-OC12::DG1-OC12-1:15::;      # Specific OC12
```

## Troubleshooting Decision Tree

### If you see LOS (Loss of Signal):
1. Check physical connections (fiber, cables)
2. Verify upstream equipment is powered and functioning
3. Check for fiber breaks or damage
4. Use: `RTRV-COND-{TYPE}::{AID}:{CTAG}::;`

### If you see AIS (Alarm Indication Signal):
1. This is usually an upstream problem
2. Check upstream equipment for alarms
3. Verify path continuity
4. Use: `RTRV-ALM-ALL:::{CTAG}::;` to find root cause

### If you see RFI (Remote Failure Indication):
1. Check local transmit power
2. Verify outbound fiber path
3. Check equipment health
4. Use: `RTRV-PM-{TYPE}::{AID}:{CTAG}::;` for diagnostics

### If multiple alarms on same circuit:
1. Address highest severity first (CR > MJ > MN)
2. Most specific alarm usually indicates root cause
3. Downstream alarms often clear when upstream is fixed

## AI Assistant Triggers

When user mentions:
- "I see alarms" → Show this TAP
- "Loss of signal" → Show LOS section
- "AIS alarm" → Show AIS section
- "Multiple alarms" → Show decision tree
- "Check alarms" → Suggest: `RTRV-ALM-ALL:::1::;`

## Related TAPs
- TAP-002: Clearing Alarms
- TAP-005: OC12 Troubleshooting
- TAP-010: T1 Circuit Troubleshooting
- TAP-015: Equipment Failure Analysis

## Related DLPs
- DLP-101: Emergency Response Procedures
- DLP-205: Alarm Notification Escalation

## Quick Reference Commands

```bash
# Get all alarms
RTRV-ALM-ALL:::1::;

# Get critical alarms only
RTRV-ALM-ALL:::2::NTFCNCDE=CR;

# Get alarms for specific OC12
RTRV-ALM-OC12::DG1-OC12-1:3::;

# Get detailed conditions
RTRV-COND-OC12::DG1-OC12-1:4::;

# Check alarm history
RTRV-ALM-ALL:::5::MONTYPE=CLEARED;
```

## Safety Notes

⚠️ **CAUTION:**
- Do not clear alarms without identifying root cause
- Always document alarm occurrences
- Escalate service-affecting alarms immediately
- Critical alarms require immediate attention

## Notes
- CTAG (Correlation Tag) can be any unique number (typically 1-9999)
- Responses may take several seconds on loaded systems
- Some alarms auto-clear when condition resolves
- Keep alarm logs for trend analysis
